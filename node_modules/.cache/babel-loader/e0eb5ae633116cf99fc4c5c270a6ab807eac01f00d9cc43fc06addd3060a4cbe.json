{"ast":null,"code":"var _jsxFileName = \"/home/aryam/Videos/app/src/Components/Pages/RoiPart/RoiMainComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"./roiC.css\";\nimport { NavLink } from \"react-router-dom\";\nimport { AllState } from \"Components/Context/Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RoiMainComponent = () => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const drawingCanvasRef = useRef(null); // New canvas for drawing lines\n  const containerRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [startPoint, setStartPoint] = useState(null);\n  const [endPoint, setEndPoint] = useState(null);\n  const [allLines, setAllLines] = useState([]);\n  const [roiName, setRoiName] = useState(\"\");\n  const [roiColor, setRoiColor] = useState(\"#f90000\");\n  const [dimensions, setDimensions] = useState({\n    width: 0,\n    height: 0\n  });\n\n  // useEffect(() => {\n  //   videoRef.current.src = \"http://localhost:5000/video_feed\"; // Set the video source to the backend URL\n  // }, []);\n\n  useEffect(() => {\n    getRois();\n  }, []);\n  useEffect(() => {\n    updateCanvasSize();\n    window.addEventListener(\"resize\", updateCanvasSize);\n\n    // Clean up event listeners\n    return () => {\n      window.removeEventListener(\"resize\", updateCanvasSize);\n    };\n  }, []);\n  useEffect(() => {\n    if (canvasRef.current && drawingCanvasRef.current) {\n      canvasRef.current.width = dimensions.width;\n      canvasRef.current.height = dimensions.height;\n      drawingCanvasRef.current.width = dimensions.width;\n      drawingCanvasRef.current.height = dimensions.height;\n    }\n  }, [dimensions]);\n  const updateCanvasSize = () => {\n    if (containerRef.current) {\n      const {\n        width,\n        height\n      } = containerRef.current.getBoundingClientRect();\n      setDimensions({\n        width,\n        height\n      });\n    }\n  };\n  const handleMouseDown = e => {\n    setIsDrawing(true);\n    const rect = drawingCanvasRef.current.getBoundingClientRect();\n\n    // Calculate the correct x and y coordinates\n    const x = (e.clientX - rect.left) * (drawingCanvasRef.current.width / rect.width);\n    const y = (e.clientY - rect.top) * (drawingCanvasRef.current.height / rect.height);\n    console.log(x, y);\n    setStartPoint({\n      x,\n      y\n    });\n  };\n  const handleMouseMove = e => {\n    if (!isDrawing) return;\n    const rect = drawingCanvasRef.current.getBoundingClientRect();\n\n    // Calculate the correct x and y coordinates\n    const x = (e.clientX - rect.left) * (drawingCanvasRef.current.width / rect.width);\n    const y = (e.clientY - rect.top) * (drawingCanvasRef.current.height / rect.height);\n    setEndPoint({\n      x,\n      y\n    });\n    const ctx = drawingCanvasRef.current.getContext(\"2d\");\n    ctx.clearRect(0, 0, drawingCanvasRef.current.width, drawingCanvasRef.current.height);\n    drawLines(); // Redraw all existing lines\n\n    // Draw the current line\n    if (startPoint) {\n      ctx.beginPath();\n      ctx.moveTo(startPoint.x, startPoint.y);\n      ctx.lineTo(x, y);\n      ctx.strokeStyle = roiColor;\n      ctx.lineWidth = 2;\n      ctx.stroke();\n    }\n  };\n  const handleMouseUp = () => {\n    if (startPoint && endPoint) {\n      setAllLines([...allLines, {\n        start: startPoint,\n        end: endPoint\n      }]);\n    }\n    setIsDrawing(false);\n    setStartPoint(null);\n    setEndPoint(null);\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const socket = new WebSocket(\"ws://192.168.1.16:5001\");\n    socket.onmessage = event => {\n      const blob = new Blob([event.data], {\n        type: \"image/jpeg\"\n      });\n      const url = URL.createObjectURL(blob);\n      const img = new Image();\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n        URL.revokeObjectURL(url);\n      };\n      img.src = url;\n    };\n    return () => {\n      socket.close();\n    };\n  }, []);\n  const drawLines = () => {\n    const ctx = drawingCanvasRef.current.getContext(\"2d\");\n    ctx.clearRect(0, 0, drawingCanvasRef.current.width, drawingCanvasRef.current.height);\n    ctx.strokeStyle = roiColor;\n    ctx.lineWidth = 2;\n    allLines.forEach(({\n      start,\n      end\n    }) => {\n      ctx.beginPath();\n      ctx.moveTo(start.x, start.y);\n      ctx.lineTo(end.x, end.y);\n      ctx.stroke();\n    });\n  };\n  useEffect(() => {\n    drawLines();\n  }, [allLines]);\n  const sendCoordinatesToBackend = () => {\n    let coordinatesObj = {};\n    allLines.forEach((obj, index) => {\n      // let ind = index.toString();\n      coordinatesObj[index] = [Math.round(obj.end.x), Math.round(obj.end.y)];\n    });\n    let roiJson = {\n      points: allLines.length,\n      coordinates: coordinatesObj\n    };\n    let rr = JSON.stringify({\n      roi_json: roiJson\n    });\n    const payload = {\n      roi_name: roiName,\n      roi_json: rr,\n      roi_color: roiColor\n    };\n    fetch(`${process.env.REACT_APP_BASE_URL}/manage_roi/`, {\n      method: \"POST\",\n      headers: {\n        key: sessionStorage.getItem(\"admin_key\"),\n        Admin_key: sessionStorage.getItem(\"admin_key\"),\n        \"Content-Type\": \"application/json\",\n        \"ngrok-skip-browser-warning\": true\n      },\n      body: JSON.stringify(payload)\n    }).then(response => response.json()).then(data => console.log(data)).catch(error => console.error(\"Error:\", error));\n  };\n  const handleRoiNameChange = event => {\n    setRoiName(event.target.value);\n  };\n  const handleRoiColorChange = event => {\n    setRoiColor(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"roiMainComponent\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"roiVideoPart\",\n      style: {\n        position: \"relative\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          position: \"absolute\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: drawingCanvasRef,\n        style: {\n          position: \"absolute\"\n        },\n        onMouseDown: handleMouseDown,\n        onMouseMove: handleMouseMove,\n        onMouseUp: handleMouseUp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"roiSidePanel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"roiEntry\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"roiName\",\n          className: \"roiNameL\",\n          children: \"RoI Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"roiName\",\n          className: \"majorInpFeild\",\n          value: roiName,\n          onChange: handleRoiNameChange,\n          placeholder: \"Enter Roi Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"roiEntry\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"roiColor\",\n          className: \"roiColorL\",\n          children: \"RoI Color\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"color\",\n          id: \"roiColor\",\n          className: \"roiColorI\",\n          value: roiColor,\n          onChange: handleRoiColorChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"genrateBtn\",\n        onClick: sendCoordinatesToBackend,\n        children: \"Generate RoI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"genrateBtn\",\n        style: {\n          margin: \"10px 0 10px 0px\"\n        },\n        children: \"ROI List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"roiEntry\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"closeBtn\",\n          children: /*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/dashboard\",\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n};\n_s(RoiMainComponent, \"hg0G5dHu7UVJv0vS+7GnSMEMDlc=\");\n_c = RoiMainComponent;\nexport default RoiMainComponent;\nvar _c;\n$RefreshReg$(_c, \"RoiMainComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","NavLink","AllState","jsxDEV","_jsxDEV","RoiMainComponent","_s","videoRef","canvasRef","drawingCanvasRef","containerRef","isDrawing","setIsDrawing","startPoint","setStartPoint","endPoint","setEndPoint","allLines","setAllLines","roiName","setRoiName","roiColor","setRoiColor","dimensions","setDimensions","width","height","getRois","updateCanvasSize","window","addEventListener","removeEventListener","current","getBoundingClientRect","handleMouseDown","e","rect","x","clientX","left","y","clientY","top","console","log","handleMouseMove","ctx","getContext","clearRect","drawLines","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","handleMouseUp","start","end","canvas","socket","WebSocket","onmessage","event","blob","Blob","data","type","url","URL","createObjectURL","img","Image","onload","drawImage","revokeObjectURL","src","close","forEach","sendCoordinatesToBackend","coordinatesObj","obj","index","Math","round","roiJson","points","length","coordinates","rr","JSON","stringify","roi_json","payload","roi_name","roi_color","fetch","process","env","REACT_APP_BASE_URL","method","headers","key","sessionStorage","getItem","Admin_key","body","then","response","json","catch","error","handleRoiNameChange","target","value","handleRoiColorChange","className","children","ref","style","position","fileName","_jsxFileName","lineNumber","columnNumber","onMouseDown","onMouseMove","onMouseUp","htmlFor","id","onChange","placeholder","onClick","margin","to","_c","$RefreshReg$"],"sources":["/home/aryam/Videos/app/src/Components/Pages/RoiPart/RoiMainComponent.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport \"./roiC.css\";\nimport { NavLink } from \"react-router-dom\";\nimport { AllState } from \"Components/Context/Context\";\n\nconst RoiMainComponent = () => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const drawingCanvasRef = useRef(null); // New canvas for drawing lines\n  const containerRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [startPoint, setStartPoint] = useState(null);\n  const [endPoint, setEndPoint] = useState(null);\n  const [allLines, setAllLines] = useState([]);\n  const [roiName, setRoiName] = useState(\"\");\n  const [roiColor, setRoiColor] = useState(\"#f90000\");\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n\n  // useEffect(() => {\n  //   videoRef.current.src = \"http://localhost:5000/video_feed\"; // Set the video source to the backend URL\n  // }, []);\n\n  useEffect(() => {\n    getRois();\n  }, []);\n\n  useEffect(() => {\n    updateCanvasSize();\n    window.addEventListener(\"resize\", updateCanvasSize);\n\n    // Clean up event listeners\n    return () => {\n      window.removeEventListener(\"resize\", updateCanvasSize);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (canvasRef.current && drawingCanvasRef.current) {\n      canvasRef.current.width = dimensions.width;\n      canvasRef.current.height = dimensions.height;\n      drawingCanvasRef.current.width = dimensions.width;\n      drawingCanvasRef.current.height = dimensions.height;\n    }\n  }, [dimensions]);\n\n  const updateCanvasSize = () => {\n    if (containerRef.current) {\n      const { width, height } = containerRef.current.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  };\n\n  const handleMouseDown = (e) => {\n    setIsDrawing(true);\n\n    const rect = drawingCanvasRef.current.getBoundingClientRect();\n\n    // Calculate the correct x and y coordinates\n    const x =\n      (e.clientX - rect.left) * (drawingCanvasRef.current.width / rect.width);\n    const y =\n      (e.clientY - rect.top) * (drawingCanvasRef.current.height / rect.height);\n\n    console.log(x, y);\n    setStartPoint({ x, y });\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isDrawing) return;\n\n    const rect = drawingCanvasRef.current.getBoundingClientRect();\n\n    // Calculate the correct x and y coordinates\n    const x =\n      (e.clientX - rect.left) * (drawingCanvasRef.current.width / rect.width);\n    const y =\n      (e.clientY - rect.top) * (drawingCanvasRef.current.height / rect.height);\n\n    setEndPoint({ x, y });\n\n    const ctx = drawingCanvasRef.current.getContext(\"2d\");\n    ctx.clearRect(\n      0,\n      0,\n      drawingCanvasRef.current.width,\n      drawingCanvasRef.current.height\n    );\n\n    drawLines(); // Redraw all existing lines\n\n    // Draw the current line\n    if (startPoint) {\n      ctx.beginPath();\n      ctx.moveTo(startPoint.x, startPoint.y);\n      ctx.lineTo(x, y);\n      ctx.strokeStyle = roiColor;\n      ctx.lineWidth = 2;\n      ctx.stroke();\n    }\n  };\n  const handleMouseUp = () => {\n    if (startPoint && endPoint) {\n      setAllLines([...allLines, { start: startPoint, end: endPoint }]);\n    }\n    setIsDrawing(false);\n    setStartPoint(null);\n    setEndPoint(null);\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const socket = new WebSocket(\"ws://192.168.1.16:5001\");\n\n    socket.onmessage = (event) => {\n      const blob = new Blob([event.data], { type: \"image/jpeg\" });\n      const url = URL.createObjectURL(blob);\n\n      const img = new Image();\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n        URL.revokeObjectURL(url);\n      };\n      img.src = url;\n    };\n\n    return () => {\n      socket.close();\n    };\n  }, []);\n\n  const drawLines = () => {\n    const ctx = drawingCanvasRef.current.getContext(\"2d\");\n    ctx.clearRect(\n      0,\n      0,\n      drawingCanvasRef.current.width,\n      drawingCanvasRef.current.height\n    );\n    ctx.strokeStyle = roiColor;\n    ctx.lineWidth = 2;\n\n    allLines.forEach(({ start, end }) => {\n      ctx.beginPath();\n      ctx.moveTo(start.x, start.y);\n      ctx.lineTo(end.x, end.y);\n      ctx.stroke();\n    });\n  };\n\n  useEffect(() => {\n    drawLines();\n  }, [allLines]);\n\n  const sendCoordinatesToBackend = () => {\n    let coordinatesObj = {};\n    allLines.forEach((obj, index) => {\n      // let ind = index.toString();\n      coordinatesObj[index] = [Math.round(obj.end.x), Math.round(obj.end.y)];\n    });\n    let roiJson = {\n      points: allLines.length,\n      coordinates: coordinatesObj,\n    };\n    let rr = JSON.stringify({ roi_json: roiJson });\n    const payload = {\n      roi_name: roiName,\n      roi_json: rr,\n      roi_color: roiColor,\n    };\n\n    fetch(`${process.env.REACT_APP_BASE_URL}/manage_roi/`, {\n      method: \"POST\",\n      headers: {\n        key: sessionStorage.getItem(\"admin_key\"),\n        Admin_key: sessionStorage.getItem(\"admin_key\"),\n        \"Content-Type\": \"application/json\",\n        \"ngrok-skip-browser-warning\": true,\n      },\n      body: JSON.stringify(payload),\n    })\n      .then((response) => response.json())\n      .then((data) => console.log(data))\n      .catch((error) => console.error(\"Error:\", error));\n  };\n\n  const handleRoiNameChange = (event) => {\n    setRoiName(event.target.value);\n  };\n\n  const handleRoiColorChange = (event) => {\n    setRoiColor(event.target.value);\n  };\n\n  return (\n    <div className=\"roiMainComponent\">\n      <div\n        ref={containerRef}\n        className=\"roiVideoPart\"\n        style={{ position: \"relative\" }}\n      >\n        <canvas ref={canvasRef} style={{ position: \"absolute\" }} />\n        <canvas\n          ref={drawingCanvasRef}\n          style={{ position: \"absolute\" }}\n          onMouseDown={handleMouseDown}\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n        />\n      </div>\n      <div className=\"roiSidePanel\">\n        <div className=\"roiEntry\">\n          <label htmlFor=\"roiName\" className=\"roiNameL\">\n            RoI Name\n          </label>\n          <input\n            type=\"text\"\n            id=\"roiName\"\n            className=\"majorInpFeild\"\n            value={roiName}\n            onChange={handleRoiNameChange}\n            placeholder=\"Enter Roi Name\"\n          />\n        </div>\n        <div className=\"roiEntry\">\n          <label htmlFor=\"roiColor\" className=\"roiColorL\">\n            RoI Color\n          </label>\n          <input\n            type=\"color\"\n            id=\"roiColor\"\n            className=\"roiColorI\"\n            value={roiColor}\n            onChange={handleRoiColorChange}\n          />\n        </div>\n        <button className=\"genrateBtn\" onClick={sendCoordinatesToBackend}>\n          Generate RoI\n        </button>\n        <button className=\"genrateBtn\" style={{margin:\"10px 0 10px 0px\"}}>\n          ROI List\n        </button>\n        {/* <div className=\"roilist\">\n          <h2>ROI List</h2>\n          <div>\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n              }}\n            >\n              <p>Id</p>\n              <p>Name</p>\n              <p>Color</p>\n              <p>Action</p>\n            </div>\n            {roiDatas.map((roi) => {\n              return (\n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"space-between\",\n                    textAlign: \"center\",\n                  }}\n                  key={roi.id}\n                >\n                  <p>{roi.id}</p>\n                  <p>{roi.roi_name}</p>\n                  <p>\n                    <input value={roi.roi_color} type=\"color\" disabled=\"true\" />\n                  </p>\n                  <p>\n                    <button >\n                      <img src={deleteICon} />\n                    </button>\n                  </p>\n                </div>\n              );\n            })}\n          </div>\n        </div> */}\n        <div className=\"roiEntry\">\n          <button className=\"closeBtn\">\n            <NavLink to=\"/dashboard\">Close</NavLink>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RoiMainComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}