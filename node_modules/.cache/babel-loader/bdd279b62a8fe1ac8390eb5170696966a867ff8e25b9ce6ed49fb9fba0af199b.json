{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import\"./roiC.css\";import{NavLink}from\"react-router-dom\";import{AllState}from\"Components/Context/Context\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RoiMainComponent=()=>{const{getRois}=AllState();const canvasRef=useRef(null);const drawingCanvasRef=useRef(null);// New canvas for drawing lines\nconst containerRef=useRef(null);const[isDrawing,setIsDrawing]=useState(false);const[startPoint,setStartPoint]=useState(null);const[endPoint,setEndPoint]=useState(null);const[allLines,setAllLines]=useState([]);const[roiName,setRoiName]=useState(\"\");const[roiColor,setRoiColor]=useState(\"#f90000\");const[dimensions,setDimensions]=useState({width:0,height:0});// useEffect(() => {\n//   videoRef.current.src = \"http://localhost:5000/video_feed\"; // Set the video source to the backend URL\n// }, []);\nuseEffect(()=>{getRois();},[]);useEffect(()=>{updateCanvasSize();window.addEventListener(\"resize\",updateCanvasSize);// Clean up event listeners\nreturn()=>{window.removeEventListener(\"resize\",updateCanvasSize);};},[]);useEffect(()=>{if(canvasRef.current&&drawingCanvasRef.current){canvasRef.current.width=dimensions.width;canvasRef.current.height=dimensions.height;drawingCanvasRef.current.width=dimensions.width;drawingCanvasRef.current.height=dimensions.height;}},[dimensions]);const updateCanvasSize=()=>{if(containerRef.current){const{width,height}=containerRef.current.getBoundingClientRect();setDimensions({width,height});}};const handleMouseDown=e=>{setIsDrawing(true);const rect=drawingCanvasRef.current.getBoundingClientRect();// Calculate the correct x and y coordinates\nconst x=(e.clientX-rect.left)*(drawingCanvasRef.current.width/rect.width);const y=(e.clientY-rect.top)*(drawingCanvasRef.current.height/rect.height);console.log(x,y);setStartPoint({x,y});};const handleMouseMove=e=>{if(!isDrawing)return;const rect=drawingCanvasRef.current.getBoundingClientRect();// Calculate the correct x and y coordinates\nconst x=(e.clientX-rect.left)*(drawingCanvasRef.current.width/rect.width);const y=(e.clientY-rect.top)*(drawingCanvasRef.current.height/rect.height);setEndPoint({x,y});const ctx=drawingCanvasRef.current.getContext(\"2d\");ctx.clearRect(0,0,drawingCanvasRef.current.width,drawingCanvasRef.current.height);drawLines();// Redraw all existing lines\n// Draw the current line\nif(startPoint){ctx.beginPath();ctx.moveTo(startPoint.x,startPoint.y);ctx.lineTo(x,y);ctx.strokeStyle=roiColor;ctx.lineWidth=2;ctx.stroke();}};const handleMouseUp=()=>{if(startPoint&&endPoint){setAllLines([...allLines,{start:startPoint,end:endPoint}]);}setIsDrawing(false);setStartPoint(null);setEndPoint(null);};useEffect(()=>{const canvas=canvasRef.current;const ctx=canvas.getContext(\"2d\");const socket=new WebSocket(\"ws://192.168.1.16:5001\");socket.onmessage=event=>{const blob=new Blob([event.data],{type:\"image/jpeg\"});const url=URL.createObjectURL(blob);const img=new Image();img.onload=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);ctx.drawImage(img,0,0);URL.revokeObjectURL(url);};img.src=url;};return()=>{socket.close();};},[]);const drawLines=()=>{const ctx=drawingCanvasRef.current.getContext(\"2d\");ctx.clearRect(0,0,drawingCanvasRef.current.width,drawingCanvasRef.current.height);ctx.strokeStyle=roiColor;ctx.lineWidth=2;allLines.forEach(_ref=>{let{start,end}=_ref;ctx.beginPath();ctx.moveTo(start.x,start.y);ctx.lineTo(end.x,end.y);ctx.stroke();});};useEffect(()=>{drawLines();},[allLines]);const sendCoordinatesToBackend=()=>{let coordinatesObj={};allLines.forEach((obj,index)=>{// let ind = index.toString();\ncoordinatesObj[index]=[Math.round(obj.end.x),Math.round(obj.end.y)];});let roiJson={points:allLines.length,coordinates:coordinatesObj};let rr=JSON.stringify({roi_json:roiJson});const payload={roi_name:roiName,roi_json:rr,roi_color:roiColor};fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/manage_roi/\"),{method:\"POST\",headers:{key:sessionStorage.getItem(\"admin_key\"),Admin_key:sessionStorage.getItem(\"admin_key\"),\"Content-Type\":\"application/json\",\"ngrok-skip-browser-warning\":true},body:JSON.stringify(payload)}).then(response=>response.json()).then(data=>console.log(data)).catch(error=>console.error(\"Error:\",error));};const handleRoiNameChange=event=>{setRoiName(event.target.value);};const handleRoiColorChange=event=>{setRoiColor(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"roiMainComponent\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:containerRef,className:\"roiVideoPart\",style:{position:\"relative\"},children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{position:\"absolute\"}}),/*#__PURE__*/_jsx(\"canvas\",{ref:drawingCanvasRef,style:{position:\"absolute\"},onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"roiSidePanel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"roiEntry\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"roiName\",className:\"roiNameL\",children:\"RoI Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"roiName\",className:\"majorInpFeild\",value:roiName,onChange:handleRoiNameChange,placeholder:\"Enter Roi Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"roiEntry\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"roiColor\",className:\"roiColorL\",children:\"RoI Color\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",id:\"roiColor\",className:\"roiColorI\",value:roiColor,onChange:handleRoiColorChange})]}),/*#__PURE__*/_jsx(\"button\",{className:\"genrateBtn\",onClick:sendCoordinatesToBackend,children:\"Generate RoI\"}),/*#__PURE__*/_jsx(\"button\",{className:\"genrateBtn\",style:{margin:\"10px 0 10px 0px\"},children:\"ROI List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roiEntry\",children:/*#__PURE__*/_jsx(\"button\",{className:\"closeBtn\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/dashboard\",children:\"Close\"})})})]})]});};export default RoiMainComponent;","map":{"version":3,"names":["React","useEffect","useRef","useState","NavLink","AllState","jsx","_jsx","jsxs","_jsxs","RoiMainComponent","getRois","canvasRef","drawingCanvasRef","containerRef","isDrawing","setIsDrawing","startPoint","setStartPoint","endPoint","setEndPoint","allLines","setAllLines","roiName","setRoiName","roiColor","setRoiColor","dimensions","setDimensions","width","height","updateCanvasSize","window","addEventListener","removeEventListener","current","getBoundingClientRect","handleMouseDown","e","rect","x","clientX","left","y","clientY","top","console","log","handleMouseMove","ctx","getContext","clearRect","drawLines","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","handleMouseUp","start","end","canvas","socket","WebSocket","onmessage","event","blob","Blob","data","type","url","URL","createObjectURL","img","Image","onload","drawImage","revokeObjectURL","src","close","forEach","_ref","sendCoordinatesToBackend","coordinatesObj","obj","index","Math","round","roiJson","points","length","coordinates","rr","JSON","stringify","roi_json","payload","roi_name","roi_color","fetch","concat","process","env","REACT_APP_BASE_URL","method","headers","key","sessionStorage","getItem","Admin_key","body","then","response","json","catch","error","handleRoiNameChange","target","value","handleRoiColorChange","className","children","ref","style","position","onMouseDown","onMouseMove","onMouseUp","htmlFor","id","onChange","placeholder","onClick","margin","to"],"sources":["/home/aryam/Videos/app/src/Components/Pages/RoiPart/RoiMainComponent.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport \"./roiC.css\";\nimport { NavLink } from \"react-router-dom\";\nimport { AllState } from \"Components/Context/Context\";\n\nconst RoiMainComponent = () => {\n  const {  getRois } = AllState();\n  const canvasRef = useRef(null);\n  const drawingCanvasRef = useRef(null); // New canvas for drawing lines\n  const containerRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [startPoint, setStartPoint] = useState(null);\n  const [endPoint, setEndPoint] = useState(null);\n  const [allLines, setAllLines] = useState([]);\n  const [roiName, setRoiName] = useState(\"\");\n  const [roiColor, setRoiColor] = useState(\"#f90000\");\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n\n  // useEffect(() => {\n  //   videoRef.current.src = \"http://localhost:5000/video_feed\"; // Set the video source to the backend URL\n  // }, []);\n\n  useEffect(() => {\n    getRois();\n  }, []);\n\n  useEffect(() => {\n    updateCanvasSize();\n    window.addEventListener(\"resize\", updateCanvasSize);\n\n    // Clean up event listeners\n    return () => {\n      window.removeEventListener(\"resize\", updateCanvasSize);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (canvasRef.current && drawingCanvasRef.current) {\n      canvasRef.current.width = dimensions.width;\n      canvasRef.current.height = dimensions.height;\n      drawingCanvasRef.current.width = dimensions.width;\n      drawingCanvasRef.current.height = dimensions.height;\n    }\n  }, [dimensions]);\n\n  const updateCanvasSize = () => {\n    if (containerRef.current) {\n      const { width, height } = containerRef.current.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  };\n\n  const handleMouseDown = (e) => {\n    setIsDrawing(true);\n\n    const rect = drawingCanvasRef.current.getBoundingClientRect();\n\n    // Calculate the correct x and y coordinates\n    const x =\n      (e.clientX - rect.left) * (drawingCanvasRef.current.width / rect.width);\n    const y =\n      (e.clientY - rect.top) * (drawingCanvasRef.current.height / rect.height);\n\n    console.log(x, y);\n    setStartPoint({ x, y });\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isDrawing) return;\n\n    const rect = drawingCanvasRef.current.getBoundingClientRect();\n\n    // Calculate the correct x and y coordinates\n    const x =\n      (e.clientX - rect.left) * (drawingCanvasRef.current.width / rect.width);\n    const y =\n      (e.clientY - rect.top) * (drawingCanvasRef.current.height / rect.height);\n\n    setEndPoint({ x, y });\n\n    const ctx = drawingCanvasRef.current.getContext(\"2d\");\n    ctx.clearRect(\n      0,\n      0,\n      drawingCanvasRef.current.width,\n      drawingCanvasRef.current.height\n    );\n\n    drawLines(); // Redraw all existing lines\n\n    // Draw the current line\n    if (startPoint) {\n      ctx.beginPath();\n      ctx.moveTo(startPoint.x, startPoint.y);\n      ctx.lineTo(x, y);\n      ctx.strokeStyle = roiColor;\n      ctx.lineWidth = 2;\n      ctx.stroke();\n    }\n  };\n  const handleMouseUp = () => {\n    if (startPoint && endPoint) {\n      setAllLines([...allLines, { start: startPoint, end: endPoint }]);\n    }\n    setIsDrawing(false);\n    setStartPoint(null);\n    setEndPoint(null);\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const socket = new WebSocket(\"ws://192.168.1.16:5001\");\n\n    socket.onmessage = (event) => {\n      const blob = new Blob([event.data], { type: \"image/jpeg\" });\n      const url = URL.createObjectURL(blob);\n\n      const img = new Image();\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n        URL.revokeObjectURL(url);\n      };\n      img.src = url;\n    };\n\n    return () => {\n      socket.close();\n    };\n  }, []);\n\n  const drawLines = () => {\n    const ctx = drawingCanvasRef.current.getContext(\"2d\");\n    ctx.clearRect(\n      0,\n      0,\n      drawingCanvasRef.current.width,\n      drawingCanvasRef.current.height\n    );\n    ctx.strokeStyle = roiColor;\n    ctx.lineWidth = 2;\n\n    allLines.forEach(({ start, end }) => {\n      ctx.beginPath();\n      ctx.moveTo(start.x, start.y);\n      ctx.lineTo(end.x, end.y);\n      ctx.stroke();\n    });\n  };\n\n  useEffect(() => {\n    drawLines();\n  }, [allLines]);\n\n  const sendCoordinatesToBackend = () => {\n    let coordinatesObj = {};\n    allLines.forEach((obj, index) => {\n      // let ind = index.toString();\n      coordinatesObj[index] = [Math.round(obj.end.x), Math.round(obj.end.y)];\n    });\n    let roiJson = {\n      points: allLines.length,\n      coordinates: coordinatesObj,\n    };\n    let rr = JSON.stringify({ roi_json: roiJson });\n    const payload = {\n      roi_name: roiName,\n      roi_json: rr,\n      roi_color: roiColor,\n    };\n\n    fetch(`${process.env.REACT_APP_BASE_URL}/manage_roi/`, {\n      method: \"POST\",\n      headers: {\n        key: sessionStorage.getItem(\"admin_key\"),\n        Admin_key: sessionStorage.getItem(\"admin_key\"),\n        \"Content-Type\": \"application/json\",\n        \"ngrok-skip-browser-warning\": true,\n      },\n      body: JSON.stringify(payload),\n    })\n      .then((response) => response.json())\n      .then((data) => console.log(data))\n      .catch((error) => console.error(\"Error:\", error));\n  };\n\n  const handleRoiNameChange = (event) => {\n    setRoiName(event.target.value);\n  };\n\n  const handleRoiColorChange = (event) => {\n    setRoiColor(event.target.value);\n  };\n\n  return (\n    <div className=\"roiMainComponent\">\n      <div\n        ref={containerRef}\n        className=\"roiVideoPart\"\n        style={{ position: \"relative\" }}\n      >\n        <canvas ref={canvasRef} style={{ position: \"absolute\" }} />\n        <canvas\n          ref={drawingCanvasRef}\n          style={{ position: \"absolute\" }}\n          onMouseDown={handleMouseDown}\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n        />\n      </div>\n      <div className=\"roiSidePanel\">\n        <div className=\"roiEntry\">\n          <label htmlFor=\"roiName\" className=\"roiNameL\">\n            RoI Name\n          </label>\n          <input\n            type=\"text\"\n            id=\"roiName\"\n            className=\"majorInpFeild\"\n            value={roiName}\n            onChange={handleRoiNameChange}\n            placeholder=\"Enter Roi Name\"\n          />\n        </div>\n        <div className=\"roiEntry\">\n          <label htmlFor=\"roiColor\" className=\"roiColorL\">\n            RoI Color\n          </label>\n          <input\n            type=\"color\"\n            id=\"roiColor\"\n            className=\"roiColorI\"\n            value={roiColor}\n            onChange={handleRoiColorChange}\n          />\n        </div>\n        <button className=\"genrateBtn\" onClick={sendCoordinatesToBackend}>\n          Generate RoI\n        </button>\n        <button className=\"genrateBtn\" style={{margin:\"10px 0 10px 0px\"}}>\n          ROI List\n        </button>\n        {/* <div className=\"roilist\">\n          <h2>ROI List</h2>\n          <div>\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n              }}\n            >\n              <p>Id</p>\n              <p>Name</p>\n              <p>Color</p>\n              <p>Action</p>\n            </div>\n            {roiDatas.map((roi) => {\n              return (\n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"space-between\",\n                    textAlign: \"center\",\n                  }}\n                  key={roi.id}\n                >\n                  <p>{roi.id}</p>\n                  <p>{roi.roi_name}</p>\n                  <p>\n                    <input value={roi.roi_color} type=\"color\" disabled=\"true\" />\n                  </p>\n                  <p>\n                    <button >\n                      <img src={deleteICon} />\n                    </button>\n                  </p>\n                </div>\n              );\n            })}\n          </div>\n        </div> */}\n        <div className=\"roiEntry\">\n          <button className=\"closeBtn\">\n            <NavLink to=\"/dashboard\">Close</NavLink>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RoiMainComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}